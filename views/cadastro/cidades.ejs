<%- include('../partials/head'); %>
<!--Incluir registro-->
<% let P = P_USU.P_USU %>
<% let D = P[0] %>

<div class="modal fade PRINCIPAL" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true" >
    <div class="modal-dialog modal-xl" style="width: 500px;">
      <div class="modal-content">
        <div class="modal-header">
          <h5>Cadastre uma cidade</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
              <span aria-hidden="true">&times;</span>
        </button>
      </div>
        <form class="needs-validation" id="form" novalidate>
          <div class="container" style="padding: 10px;" >
              <div class="row">
                <div class="col-sm"  >
                    <label for="NOME">Nome da cidade</label>
                   <input type="text" class="form-control"  id="NOME" required>
                    <label for="COD_DOMICILIO_FISCAL">Código de domicilio fiscal</label>
                   <input type="number" class="form-control"  id="COD_DOMICILIO_FISCAL" required>
                </div>
              </div>
          
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                <button  type="submit" id="SALVA" class="btn btn-success ">Salvar</button>
              </div>
       
            </div>
          
          </form>
      </div>
    </div>
  </div>
<!--editar registro-->
<div class="modal fade EDITAR" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true" >
    <div class="modal-dialog modal-xl" style="width: 500px;">
      <div class="modal-content">
        <div class="modal-header">
          <h5>Editando uma cidade</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
              <span aria-hidden="true">&times;</span>
        </button>
      </div>
        <form class="needs-validation"  novalidate>
          <div class="container" style="padding: 10px;" >
              <div class="row">
                <div class="col-sm"  >
                    <label for="NOME_UP">Nome da cidade</label>
                   <input type="text" class="form-control"  id="NOME_UP" required>
                    <label for="COD_UP">Código de domicilio fiscal</label>
                    <input type="hidden" id="ID_SELECIONADO">
                   <input type="number" class="form-control"  id="COD_UP" required>
                </div>
              </div>
              </div>
              <div class="modal-footer">
                <% if (D.ALTERA == 'N') { %> 
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                  <button class="btn btn-success"  data-toggle="modal" disabled  >Salvar</button>
              <% }else{ %>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                <button  type="submit"  id="SALVA_EDICAO" class="btn btn-success ">Salvar</button>
  
              <%}%> 

              </div>

            </div>
          
          </form>
      </div>
    </div>
  </div>
<!--Filtro e tabela-->
<div class="grad" style="display: flex; height: auto;padding: 30px;">
    <% let filtro = P_USU.T_FILTRO %>
      <div style="width: 300px;height: 400px;">
          <form  id="filtro" >
              <div class="form-group row">
                <div class="col-sm-10">
                  <input type="text" placeholder="Nome" id="FILTRO_NOME" value="<%=filtro[0][0]%>" class="form-control"  >
                </div>
              </div>
              <div class="form-group row">
                <div class="col-sm-10">
                  <input type="text" placeholder="Cod. domicilio" id="FILTRO_COD" value="<%=filtro[0][1]%>" class="form-control"  >
                </div>
              </div>
    <button id="Buscar" type="button" class="btn btn-warning">Buscar</button>
    <br>
      </div> 
      <div style="width: 100%;display: block;" >
      <%- include('../components/exporta.ejs');%>
        <table class="table" style="width: 70%;" id="tabeladados">
          <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Cod. domicilio  fiscal</th>
                <th><input type="checkbox" id="DELETE_TOTAL"></th>
            </tr>
          </thead>
          <tbody id="tabela"   >
                 <!-- inserido pela requição ajax apos usar o filtro -->
          </tbody>
        </table>
      </div>
      
    </div>
<script type="module" src="/js/cadastro/cidades.js"></script>
<%- include('../partials/footer'); %>
